name: Setup Project Structure

on:
  workflow_dispatch:

jobs:
  setup-project:
    runs-on: ubuntu-latest

    permissions:
      contents: write

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create folder structure
        run: |
          mkdir -p .github/ISSUE_TEMPLATE
          mkdir -p docs
          mkdir -p scripts

      - name: Create README.md
        run: |
          cat << 'EOF' > README.md
          # SmartLanche
          Sistema de gerenciamento de vendas, estoque e pedidos para lanchonetes.
          EOF

      - name: Create docs/documentacao.md
        run: |
          cat << 'EOF' > docs/documentacao.md
          # Documentação do SmartLanche
          Arquitetura, requisitos e guias de desenvolvimento.
          EOF

      - name: Create Issue Template (Feature Request)
        run: |
          cat << 'EOF' > .github/ISSUE_TEMPLATE/feature-request.yml
          name: "Solicitar Nova Funcionalidade"
          description: "Use este template para sugerir novas funcionalidades."
          labels: ["enhancement"]
          body:
            - type: input
              id: feature
              attributes:
                label: "Descrição da funcionalidade"
                placeholder: "Explique a feature desejada..."
              validations:
                required: true
            - type: textarea
              id: motivation
              attributes:
                label: "Motivação"
                placeholder: "Por que isso é útil?"
            - type: textarea
              id: alternatives
              attributes:
                label: "Alternativas Consideradas"
          EOF

      - name: Create Issue Template (Bug Report)
        run: |
          cat << 'EOF' > .github/ISSUE_TEMPLATE/bug-report.yml
          name: "Reportar Bug"
          description: "Use este template para relatar erros."
          labels: ["bug"]
          body:
            - type: textarea
              id: description
              attributes:
                label: "Descrição do problema"
                placeholder: "O que está acontecendo?"
              validations:
                required: true
            - type: textarea
              id: steps
              attributes:
                label: "Como reproduzir"
                placeholder: "Passos para o bug acontecer..."
            - type: textarea
              id: expected
              attributes:
                label: "Comportamento esperado"
            - type: textarea
              id: evidence
              attributes:
                label: "Evidências"
                placeholder: "Logs, imagens, vídeos..."
          EOF

      - name: Commit changes
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add .
          git commit -m "Setup inicial: estrutura do projeto e templates"
          git push || echo "Nenhuma mudança para enviar."
