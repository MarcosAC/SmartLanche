name: Setup SmartLanche Project Structure

on:
  workflow_dispatch:

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  setup:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Create base folders
        run: |
          mkdir -p .github/ISSUE_TEMPLATE
          mkdir -p docs
          mkdir -p scripts

      - name: Create modern YAML issue templates
        run: |
          cat << 'EOF' > .github/ISSUE_TEMPLATE/bug_report.yml
          name: "üêû Bug Report"
          description: "Reporte um problema encontrado no SmartLanche"
          title: "[BUG] Descreva o problema"
          labels: ["bug"]
          body:
            - type: textarea
              id: descricao
              attributes:
                label: "Descri√ß√£o"
              validations:
                required: true
          EOF

          cat << 'EOF' > .github/ISSUE_TEMPLATE/feature_request.yml
          name: "üöÄ Feature Request"
          description: "Sugira uma nova funcionalidade"
          title: "[FEATURE] Descreva a funcionalidade"
          labels: ["enhancement"]
          EOF

          cat << 'EOF' > .github/ISSUE_TEMPLATE/task.yml
          name: "üìù Task"
          description: "Tarefa t√©cnica"
          title: "[TASK] Nova tarefa"
          labels: ["task"]
          EOF

          cat << 'EOF' > .github/ISSUE_TEMPLATE/config.yml
          blank_issues_enabled: true
          contact_links:
            - name: Documenta√ß√£o SmartLanche
              url: https://github.com/SEU_USUARIO/SEU_REPO/docs
              about: Consulte a documenta√ß√£o antes de abrir uma issue
          EOF

      - name: Create base documentation if missing
        run: |
          if [ ! -f README.md ]; then
            echo "# SmartLanche" > README.md
          fi
          echo "# Documenta√ß√£o do Sistema SmartLanche" > docs/documentacao.md

      - name: Commit changes
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add .
          git commit -m "Setup inicial do projeto SmartLanche" || echo "Nenhuma mudan√ßa para commitar"
          git push || echo "Nada para enviar"
