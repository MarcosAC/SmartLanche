name: Populate Backlog
on:
  workflow_dispatch:

permissions:
  issues: write
  contents: read

jobs:
  backlog:
    runs-on: ubuntu-latest

    steps:
      - name: Create backlog issues
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const items = [
              "Cadastrar produtos",
              "Cadastrar clientes",
              "Gerenciar estoque",
              "Registrar pedidos",
              "Carrinho e checkout",
              "Dashboard de vendas",
              "Alertas de estoque baixo",
              "Envio de relatório diário por e-mail",
              "Integração SMTP configurável",
              "Personalização da marca SmartLanche"
            ];

            for (const title of items) {
              await github.rest.issues.create({
                owner: context.repo.owner,
                repo: context.repo.repo,
                title,
                labels: ["backlog"]
              });
            }
