name: Create Scrum Labels
on:
  workflow_dispatch:

permissions:
  issues: write
  contents: read

jobs:
  create-labels:
    runs-on: ubuntu-latest

    steps:
      - name: Create labels
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const labels = [
              { name: "backlog", color: "5319e7", description: "Item planejado" },
              { name: "doing", color: "1d76db", description: "Em desenvolvimento" },
              { name: "review", color: "fbca04", description: "Em revisão" },
              { name: "done", color: "0e8a16", description: "Concluído" },
              { name: "prioridade-alta", color: "b60205", description: "Urgente" },
              { name: "enhancement", color: "a2eeef", description: "Nova funcionalidade" },
              { name: "bug", color: "d73a4a", description: "Problema ou falha" },
              { name: "documentation", color: "0052cc", description: "Docs e manuais" }
            ];

            for (const label of labels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
              } catch (e) {
                if (e.status !== 422) throw e;
              }
            }
