name: Create Epics in Classic Kanban

on:
  workflow_dispatch:

permissions:
  issues: write
  contents: read

jobs:
  create-epics:
    runs-on: ubuntu-latest

    steps:
      - name: Create Epic 1 - Sistema de Pedidos
        uses: imjohnbo/issue-bot@v3
        with:
          title: "ÉPICO 1 — Sistema de Pedidos"
          body: |
            ## Features
            ### 1.1 Criar Pedido
            - US-001 – Criar pedido manualmente
            - US-002 – Adicionar itens ao pedido
            - US-003 – Excluir/alterar itens

            Tarefas:
            - Criar tela de novo pedido
            - Criar model Pedido
            - Criar model ItemPedido
            - Persistência local (LocalDB)
            - Calcular total automaticamente
            - Validações

            ### 1.2 Acompanhar Pedido
            - US-004 – Visualizar pedidos em aberto
            - US-005 – Atualizar status

            Tarefas:
            - Tela: Lista de pedidos
            - Integração com cozinha
            - Notificações
          labels: épico
          project: "SmartLanche – Kanban"
          column: Épicos
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Create Epic 2 - Sistema da Cozinha
        uses: imjohnbo/issue-bot@v3
        with:
          title: "ÉPICO 2 — Sistema da Cozinha"
          body: |
            ## Features
            ### 2.1 Visualização dos Pedidos
            - US-006 – Atualização em tempo real
            - US-007 – Ordenar por chegada

            ### 2.2 Conclusão
            - US-008 – Marcar pronto

            Tarefas:
            - Banco de dados
            - Filtrar pedidos prontos
            - Atualização automática
          labels: épico
          project: "SmartLanche – Kanban"
          column: Épicos
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Create Epic 3 - Catálogo de Produtos
        uses: imjohnbo/issue-bot@v3
        with:
          title: "ÉPICO 3 — Catálogo de Produtos"
          body: |
            ## Feature 3.1 CRUD
            - US-009 – Cadastrar produtos
            - US-010 – Editar produtos
            - US-011 – Excluir produtos

            Tarefas:
            - Tela CRUD
            - Persistência
            - Upload de imagens
            - Customização por lanchonete
          labels: épico
          project: "SmartLanche – Kanban"
          column: Épicos
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Create Epic 4 - Multi-Lanchonete
        uses: imjohnbo/issue-bot@v3
        with:
          title: "ÉPICO 4 — Multi-Lanchonete"
          body: |
            ## Features
            - US-012 – Identidade visual
            - US-013 – SMTP configurável
            - US-014 – Teste de envio
            - US-015 – Envio automático

            Tarefas:
            - Tela de configurações
            - Criptografia local
            - SMTP (SSL/TLS)
          labels: épico
          project: "SmartLanche – Kanban"
          column: Épicos
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Create Epic 5 - Relatórios
        uses: imjohnbo/issue-bot@v3
        with:
          title: "ÉPICO 5 — Relatórios"
          body: |
            Features:
            - US-016 – Total diário
            - US-017 – Itens mais vendidos

            Tarefas:
            - Tela com filtros
            - Exportar PDF
            - Exportar CSV
          labels: épico
          project: "SmartLanche – Kanban"
          column: Épicos
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Create Epic 6 - Administração
        uses: imjohnbo/issue-bot@v3
        with:
          title: "ÉPICO 6 — Administração"
          body: |
            Stories:
            - US-018 – Gerenciar usuários
            - US-019 – Restringir acessos
          labels: épico
          project: "SmartLanche – Kanban"
          column: Épicos
          token: ${{ secrets.GITHUB_TOKEN }}
